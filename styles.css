*{margin:0;padding:0;box-sizing:border-box}
body{background:#f5f7fa;overflow:hidden;font-family:'Inter',sans-serif}

/* Title Screen */
#titleScreen{position:fixed;inset:0;background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);display:flex;flex-direction:column;align-items:center;justify-content:center;z-index:200}
#titleScreen.hidden{display:none}
.logo{font-family:'Poppins',sans-serif;font-size:56px;font-weight:700;color:#ffffff;letter-spacing:2px;text-shadow:0 4px 20px rgba(0,0,0,0.2)}
.sub{font-size:16px;color:rgba(255,255,255,0.9);letter-spacing:4px;margin:8px 0 40px;font-weight:500}

/* Menu Container with Tabs */
.menu-container{background:#ffffff;border:none;border-radius:16px;width:520px;max-width:95vw;max-height:80vh;display:flex;flex-direction:column;box-shadow:0 20px 60px rgba(0,0,0,0.2)}
.tab-nav{display:flex;border-bottom:2px solid #e8eef5;flex-shrink:0;background:#f8fafc}
.tab-btn{flex:1;background:transparent;border:none;padding:16px;font-family:'Inter',sans-serif;font-size:13px;font-weight:500;color:#64748b;cursor:pointer;transition:all 0.3s;position:relative}
.tab-btn:hover{color:#475569;background:#f1f5f9}
.tab-btn.active{color:#667eea;background:#ffffff}
.tab-btn.active::after{content:'';position:absolute;bottom:-2px;left:0;right:0;height:2px;background:#667eea}
.tab-content{display:none;padding:24px;overflow-y:auto;flex:1}
.tab-content.active{display:block}

/* Location Grid */
.loc-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:12px}
.loc{background:#f8fafc;border:2px solid #e2e8f0;border-radius:12px;padding:16px;cursor:pointer;text-align:center;transition:all 0.2s}
.loc:hover{border-color:#cbd5e1;background:#f1f5f9;transform:translateY(-2px);box-shadow:0 4px 12px rgba(0,0,0,0.08)}
.loc.sel{border-color:#667eea;background:#f0f4ff;box-shadow:0 4px 12px rgba(102,126,234,0.2)}
.loc-name{color:#1e293b;font-family:'Poppins',sans-serif;font-size:14px;font-weight:600;margin-bottom:4px}
.loc-region{color:#64748b;font-size:12px}
.loc.custom{border-color:#f59e0b;background:#fffbeb}
.loc.custom:hover{border-color:#d97706;background:#fef3c7}
.loc.custom.sel{border-color:#f59e0b;background:#fef3c7;box-shadow:0 4px 12px rgba(245,158,11,0.2)}
.loc.custom .loc-name{color:#92400e}

/* Custom Location Panel */
#customPanel{display:none;margin-top:16px;padding:20px;background:#fffbeb;border:2px solid #fcd34d;border-radius:12px}
#customPanel.show{display:block}
.custom-title{font-family:'Poppins',sans-serif;font-size:14px;font-weight:600;color:#92400e;margin-bottom:16px;text-align:center}
.custom-row{margin-bottom:14px}
.custom-row label{display:block;font-size:12px;font-weight:500;color:#78716c;margin-bottom:8px}
.search-row{display:flex;gap:10px}
.search-row input{flex:1;background:#ffffff;border:2px solid #e5e7eb;border-radius:8px;padding:12px;color:#1f2937;font-size:14px;font-family:'Inter',sans-serif}
.search-row input:focus{outline:none;border-color:#f59e0b;box-shadow:0 0 0 3px rgba(245,158,11,0.1)}
.search-btn{background:#f59e0b;border:none;border-radius:8px;padding:12px 18px;color:#ffffff;font-weight:600;cursor:pointer;transition:all 0.2s}
.search-btn:hover{background:#d97706;transform:translateY(-1px);box-shadow:0 4px 12px rgba(245,158,11,0.3)}
#searchStatus{font-size:11px;margin-top:8px;min-height:16px;color:#6b7280}
#searchStatus.success{color:#059669}
#searchStatus.error{color:#dc2626}
.divider{text-align:center;margin:16px 0;position:relative}
.divider::before{content:'';position:absolute;left:0;right:0;top:50%;height:1px;background:#e5e7eb}
.divider span{background:#fffbeb;padding:0 12px;position:relative;color:#9ca3af;font-size:12px}
.coords-row{display:flex;gap:12px}
.coords-row input{flex:1;background:#ffffff;border:2px solid #e5e7eb;border-radius:8px;padding:12px;color:#1f2937;font-size:14px;font-family:'Inter',sans-serif}
.coords-row input:focus{outline:none;border-color:#f59e0b;box-shadow:0 0 0 3px rgba(245,158,11,0.1)}

/* Game Mode */
.mode-grid{display:flex;flex-direction:column;gap:12px}
.mode{display:flex;align-items:center;gap:16px;background:#f8fafc;border:2px solid #e2e8f0;border-radius:12px;padding:16px;cursor:pointer;transition:all 0.2s}
.mode:hover{border-color:#cbd5e1;background:#f1f5f9;transform:translateY(-2px);box-shadow:0 4px 12px rgba(0,0,0,0.08)}
.mode.sel{border-color:#667eea;background:#f0f4ff;box-shadow:0 4px 12px rgba(102,126,234,0.2)}
.mode-icon{font-size:28px;width:44px;text-align:center}
.mode-name{color:#1e293b;font-family:'Poppins',sans-serif;font-size:14px;font-weight:600}
.mode-desc{color:#64748b;font-size:12px;margin-top:4px}
.mode-check{width:20px;height:20px;border:2px solid #cbd5e1;border-radius:50%;margin-left:auto;display:flex;align-items:center;justify-content:center;font-size:12px;color:transparent;transition:all 0.2s}
.mode.sel .mode-check{border-color:#667eea;background:#667eea;color:#ffffff}

/* Controls Tab */
.ctrl-grid{display:grid;grid-template-columns:1fr 1fr;gap:8px 20px}
.ctrl-section{grid-column:1/-1;font-family:'Poppins',sans-serif;font-size:11px;font-weight:600;color:#667eea;text-transform:uppercase;letter-spacing:0.5px;margin-top:12px;padding-bottom:6px;border-bottom:2px solid #e8eef5}
.ctrl-section:first-child{margin-top:0}
.ctrl-row{display:flex;align-items:center;gap:10px;padding:6px 0}
.ctrl-key{background:#f0f4ff;border:2px solid #c7d2fe;border-radius:6px;padding:4px 10px;font-family:'Inter',sans-serif;font-size:11px;font-weight:600;color:#667eea}
.ctrl-action{font-size:12px;color:#475569}

/* Start Button */
.start-section{padding:20px 24px;border-top:2px solid #e8eef5;flex-shrink:0;background:#f8fafc}
.startBtn{width:100%;background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);border:none;border-radius:12px;padding:16px;font-family:'Poppins',sans-serif;font-size:15px;font-weight:600;color:#ffffff;cursor:pointer;letter-spacing:1px;transition:all 0.2s}
.startBtn:hover{transform:translateY(-2px);box-shadow:0 8px 24px rgba(102,126,234,0.4)}

/* HUD */
#hud{position:fixed;top:20px;left:20px;z-index:100;display:none}
#hud.show{display:block}
.hud-box{background:rgba(255,255,255,0.95);border:none;border-radius:16px;padding:20px;min-width:160px;box-shadow:0 8px 24px rgba(0,0,0,0.1)}
#speed{font-family:'Poppins',sans-serif;font-size:42px;font-weight:700;color:#1e293b}
#speed.fast{color:#dc2626}
.hud-label{font-size:11px;color:#64748b;font-weight:500;text-transform:uppercase;letter-spacing:0.5px}
#street{font-family:'Inter',sans-serif;font-size:11px;color:#475569;margin-top:12px;border-top:2px solid #f1f5f9;padding-top:12px}
#boostBar{width:100%;height:6px;background:#f1f5f9;border-radius:3px;margin-top:10px;overflow:hidden}
#boostFill{height:100%;width:100%;background:linear-gradient(90deg,#667eea,#764ba2);transition:width 0.1s;border-radius:3px}
#boostFill.active{background:linear-gradient(90deg,#f59e0b,#d97706)}
.indicators{display:flex;gap:10px;margin-top:10px;font-size:10px}
.ind{color:#cbd5e1;font-weight:500}
.ind.on{color:#667eea}
.ind.warn{color:#dc2626}
#offRoadWarn{position:fixed;inset:0;pointer-events:none;border:4px solid transparent;z-index:50;transition:border-color 0.2s}
#offRoadWarn.active{border-color:rgba(239,68,68,0.6);animation:pulse 0.5s infinite}
@keyframes pulse{0%,100%{border-color:rgba(239,68,68,0.6)}50%{border-color:rgba(239,68,68,0.2)}}
#minimap{position:fixed;bottom:20px;left:20px;width:160px;height:160px;background:rgba(255,255,255,0.95);border:none;border-radius:16px;z-index:100;display:none;cursor:pointer;box-shadow:0 8px 24px rgba(0,0,0,0.1)}
#minimap.show{display:block}
#minimap:hover{box-shadow:0 12px 32px rgba(0,0,0,0.15)}
#largeMap{position:fixed;inset:0;background:rgba(0,0,0,0.8);z-index:150;display:none;align-items:center;justify-content:center;backdrop-filter:blur(4px)}
#largeMap.show{display:flex}
#largeMapCanvas{border:none;border-radius:16px;box-shadow:0 20px 60px rgba(0,0,0,0.3)}
#mapClose{position:absolute;top:30px;right:30px;background:#ffffff;border:none;color:#1e293b;font-family:'Inter',sans-serif;font-size:14px;font-weight:600;padding:12px 24px;cursor:pointer;border-radius:10px;transition:all 0.2s}
#mapClose:hover{background:#f1f5f9;transform:translateY(-2px);box-shadow:0 4px 12px rgba(0,0,0,0.1)}
#modeHud{position:fixed;top:20px;left:50%;transform:translateX(-50%);background:rgba(255,255,255,0.95);border:none;border-radius:12px;padding:12px 28px;z-index:100;text-align:center;display:none;box-shadow:0 8px 24px rgba(0,0,0,0.1)}
#modeHud.show{display:block}
#modeTitle{font-family:'Poppins',sans-serif;font-size:11px;font-weight:600;color:#667eea;text-transform:uppercase;letter-spacing:0.5px}
#modeTimer{font-family:'Poppins',sans-serif;font-size:24px;font-weight:700;color:#1e293b;margin-top:2px}
#modeInfo{font-size:11px;color:#64748b;margin-top:2px}
#police{position:fixed;top:20px;right:20px;background:rgba(255,255,255,0.95);border:none;border-radius:12px;padding:10px 16px;color:#dc2626;font-family:'Poppins',sans-serif;font-size:13px;font-weight:600;z-index:100;display:none;box-shadow:0 8px 24px rgba(0,0,0,0.1)}
#police.show{display:block}
#floatMenu{position:fixed;bottom:20px;right:20px;z-index:100;display:none}
#floatMenu.show{display:block}
#floatBtn{width:50px;height:50px;border-radius:50%;background:#ffffff;border:none;color:#667eea;font-size:20px;cursor:pointer;box-shadow:0 8px 24px rgba(0,0,0,0.15);transition:all 0.2s}
#floatBtn:hover{transform:scale(1.05);box-shadow:0 12px 32px rgba(0,0,0,0.2)}
.floatItems{position:absolute;bottom:60px;right:0;display:none;flex-direction:column;gap:6px}
#floatMenu.open .floatItems{display:flex}
.floatItem{background:#ffffff;border:none;border-radius:10px;padding:10px 16px;color:#475569;font-size:12px;font-weight:500;cursor:pointer;white-space:nowrap;box-shadow:0 4px 12px rgba(0,0,0,0.1);transition:all 0.2s}
.floatItem:hover{background:#f8fafc;transform:translateX(-4px);box-shadow:0 6px 16px rgba(0,0,0,0.15)}
.floatItem.on{background:#667eea;color:#ffffff}
.floatItem.recording{background:#dc2626;color:#ffffff}
#controlsTab{position:fixed;bottom:20px;left:200px;background:rgba(255,255,255,0.95);border:none;border-radius:12px;z-index:100;display:none;font-size:12px;color:#475569;max-width:220px;box-shadow:0 8px 24px rgba(0,0,0,0.1)}
#controlsTab.show{display:block}
#ctrlHeader{padding:12px 16px;cursor:pointer;color:#667eea;font-family:'Poppins',sans-serif;font-weight:600}
#ctrlContent{padding:12px 16px;border-top:2px solid #f1f5f9;line-height:1.8}
#ctrlContent.hidden{display:none}
#coords{position:fixed;bottom:200px;left:20px;background:rgba(255,255,255,0.95);border:none;border-radius:10px;padding:10px 14px;font-size:11px;color:#475569;z-index:100;display:none;box-shadow:0 4px 12px rgba(0,0,0,0.1)}
#coords.show{display:block}
#loading{position:fixed;inset:0;background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);display:none;align-items:center;justify-content:center;flex-direction:column;z-index:300;cursor:pointer}
#loading.show{display:flex}
.spinner{width:48px;height:48px;border:4px solid rgba(255,255,255,0.3);border-top-color:#ffffff;border-radius:50%;animation:spin 1s linear infinite}
@keyframes spin{to{transform:rotate(360deg)}}
#loadText{color:#ffffff;font-family:'Poppins',sans-serif;margin-top:20px;font-size:15px;font-weight:500}
#pauseScreen{position:fixed;inset:0;background:rgba(0,0,0,0.8);display:none;align-items:center;justify-content:center;flex-direction:column;z-index:250;backdrop-filter:blur(8px)}
#pauseScreen.show{display:flex}
.pauseTitle{font-family:'Poppins',sans-serif;font-size:42px;font-weight:700;color:#ffffff;margin-bottom:32px}
.pauseBtn{background:#ffffff;border:none;border-radius:12px;padding:14px 40px;color:#1e293b;font-family:'Poppins',sans-serif;font-size:14px;font-weight:600;cursor:pointer;margin:8px;min-width:180px;transition:all 0.2s}
.pauseBtn:hover{transform:translateY(-2px);box-shadow:0 8px 24px rgba(255,255,255,0.2)}
#resultScreen{position:fixed;inset:0;background:rgba(0,0,0,0.8);display:none;align-items:center;justify-content:center;z-index:260;backdrop-filter:blur(8px)}
#resultScreen.show{display:flex}
.resultBox{background:#ffffff;border:none;border-radius:20px;padding:40px 60px;text-align:center;box-shadow:0 20px 60px rgba(0,0,0,0.3)}
#resultTitle{font-family:'Poppins',sans-serif;font-size:32px;font-weight:700;color:#667eea;margin-bottom:16px}
#resultStats{color:#475569;margin-bottom:24px;line-height:1.8;font-size:15px}
#caughtScreen{position:fixed;inset:0;background:rgba(220,38,38,0.15);display:none;align-items:center;justify-content:center;z-index:270;backdrop-filter:blur(8px)}
#caughtScreen.show{display:flex}
.caughtBox{background:#ffffff;border:none;border-radius:20px;padding:40px;text-align:center;box-shadow:0 20px 60px rgba(220,38,38,0.3)}
.caughtTitle{font-family:'Poppins',sans-serif;font-size:36px;font-weight:700;color:#dc2626;margin-bottom:16px}
.caughtText{color:#475569;margin-bottom:24px;font-size:15px}
.caughtBtn{background:#dc2626;border:none;border-radius:12px;padding:14px 32px;color:#ffffff;font-family:'Poppins',sans-serif;font-weight:600;cursor:pointer;transition:all 0.2s}
.caughtBtn:hover{background:#b91c1c;transform:translateY(-2px);box-shadow:0 8px 24px rgba(220,38,38,0.3)}
